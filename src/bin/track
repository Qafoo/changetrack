#!/usr/bin/env php
<?php

require_once __DIR__ . '/../../vendor/autoload.php';

if (!isset($argv[1])) {
    echo "Usage: $ src/bin/track <git-repo-url>\n";
    exit(-1);
}

$analyzer = new Qafoo\ChangeTrack\Analyzer(
    $argv[1],
    'src/var/tmp/checkout',
    'src/var/tmp/cache'
);

$changes = $analyzer->analyze();

// $renderer = new Qafoo\ChangeTrack\Renderer\XmlRenderer();
$renderer = new Qafoo\ChangeTrack\Renderer\JmsSerializerRenderer();
echo $renderer->renderOutput($changes);
