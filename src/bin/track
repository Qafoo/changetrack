#!/usr/bin/env php
<?php
(@include __DIR__ . '/../../../../autoload.php') ||
    fwrite(
        STDERR,
        'ERROR: Composer not properly set up! Run "composer install" or see README.rst for more details' . PHP_EOL
    ) && exit(1);

use Qafoo\ChangeTrack\Bootstrap;
use Symfony\Component\Console\Input\ArgvInput;

$bootstrap = new Bootstrap();

// Pre-load configuration to allow service injection to depend on it
$input = new ArgvInput();
if ($input->hasParameterOption(array('--config', '-c'))) {
    $bootstrap->setConfigFile($input->getParameterOption(array('--config', '-c')));
}

$application = $bootstrap->createApplication();
$application->run();
